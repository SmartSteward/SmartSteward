<!DOCTYPE html>
<html>
<head>
    <title>XiaoZhi Web UI</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .status-panel {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .status-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        .status-item:last-child {
            border-bottom: none;
        }
        .text-display {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            min-height: 150px;
            margin-bottom: 20px;
        }
        .controls {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
        }
        button {
            padding: 12px 20px;
            margin: 10px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: #4CAF50;
            color: white;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #45a049;
        }
        button.abort {
            background-color: #f44336;
        }
        button.abort:hover {
            background-color: #d32f2f;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }
        .status-connected {
            background-color: #4CAF50;
        }
        .status-disconnected {
            background-color: #f44336;
        }
        #text-content {
            font-size: 18px;
            line-height: 1.6;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>XiaoZhi Web æ§åˆ¶é¢æ¿</h1>
    </div>
    
    <div class="status-panel">
        <h2>çŠ¶æ€ä¿¡æ¯</h2>
        <div class="status-item">
            <span>è¿æ¥çŠ¶æ€:</span>
            <span><span class="status-indicator status-disconnected" id="connection-status"></span><span id="connection-text">æœªè¿æ¥</span></span>
        </div>
        <div class="status-item">
            <span>è®¾å¤‡çŠ¶æ€:</span>
            <span id="status">å¾…å‘½ä¸­</span>
        </div>
        <div class="status-item">
            <span>æƒ…ç»ªçŠ¶æ€:</span>
            <span id="emotion">neutral</span>
        </div>
        <div class="status-item">
            <span>æŒ‰é’®çŠ¶æ€:</span>
            <span id="button-status">-</span>
        </div>
    </div>
    
    <div class="text-display">
        <h2>æ–‡æœ¬æ˜¾ç¤º</h2>
        <p id="text-content">ç­‰å¾…è¿æ¥...</p>
    </div>
    
    <div class="controls">
        <h2>æ§åˆ¶é¢æ¿</h2>
        <button onclick="sendAction('press')">å¼€å§‹å½•éŸ³</button>
        <button onclick="sendAction('release')">åœæ­¢å½•éŸ³</button>
        <button onclick="sendAction('auto_toggle')">è‡ªåŠ¨æ¨¡å¼</button>
        <button class="abort" onclick="sendAction('abort')">ä¸­æ–­å¯¹è¯</button>
        <br>
        <input type="text" id="text-input" placeholder="è¾“å…¥è¦å‘é€çš„æ–‡æœ¬" style="padding: 10px; width: 300px; margin: 10px;">
        <button onclick="sendText()">å‘é€æ–‡æœ¬</button>
    </div>

    <script>
        let ws;
        
        function connect() {
            ws = new WebSocket(`ws://${window.location.host}/ws`);
            
            ws.onopen = function(event) {
                console.log("Connected to WebSocket");
                document.getElementById('connection-status').className = 'status-indicator status-connected';
                document.getElementById('connection-text').textContent = 'å·²è¿æ¥';
                document.getElementById('text-content').textContent = 'å·²è¿æ¥åˆ° XiaoZhi';
            };
            
            ws.onmessage = function(event) {
                const data = JSON.parse(event.data);
                handleServerMessage(data);
            };
            
            ws.onclose = function(event) {
                console.log("WebSocket connection closed");
                document.getElementById('connection-status').className = 'status-indicator status-disconnected';
                document.getElementById('connection-text').textContent = 'è¿æ¥å·²æ–­å¼€';
                document.getElementById('text-content').textContent = 'è¿æ¥å·²æ–­å¼€ï¼Œæ­£åœ¨å°è¯•é‡æ–°è¿æ¥...';
                
                // å°è¯•é‡æ–°è¿æ¥
                setTimeout(connect, 3000);
            };
            
            ws.onerror = function(error) {
                console.log("WebSocket error: " + error);
            };
        }
        
        function handleServerMessage(message) {
            switch(message.type) {
                case 'status_update':
                    document.getElementById('status').textContent = message.data.status;
                    break;
                case 'emotion_update':
                    document.getElementById('emotion').textContent = message.data.emotion;
                    break;
                case 'text_update':
                    document.getElementById('text-content').textContent = message.data.text;
                    break;
                case 'button_status_update':
                    document.getElementById('button-status').textContent = message.data.text;
                    break;
            }
        }
        
        function sendAction(action, payload = {}) {
            if (ws && ws.readyState === WebSocket.OPEN) {
                const message = {
                    action: action,
                    payload: payload
                };
                ws.send(JSON.stringify(message));
            } else {
                alert('æœªè¿æ¥åˆ°æœåŠ¡å™¨');
            }
        }
        
        function sendText() {
            const textInput = document.getElementById('text-input');
            const text = textInput.value.trim();
            if (text) {
                sendAction('send_text', {text: text});
                textInput.value = '';
            }
        }
        
        // åˆå§‹åŒ–è¿æ¥
        connect();
    </script>
</body>
</html>
```

```
<!DOCTYPE html>
<html>
<head>
    <title>XiaoZhi Emotion Display</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #000;
            overflow: hidden;
        }
        
        .emotion-container {
            font-size: 30vw;
            text-align: center;
            user-select: none;
        }
        
        .emotion {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="emotion-container">
        <div id="emotion" class="emotion">ğŸ˜</div>
    </div>

    <script>
        let ws;
        
        function connect() {
            ws = new WebSocket(`ws://${window.location.host}/ws`);
            
            ws.onopen = function(event) {
                console.log("Connected to WebSocket");
            };
            
            ws.onmessage = function(event) {
                const data = JSON.parse(event.data);
                console.log("æ”¶åˆ°æ¶ˆæ¯:", data);  // æ·»åŠ è°ƒè¯•æ—¥å¿—
                handleServerMessage(data);
            };
            
            ws.onclose = function(event) {
                console.log("WebSocket connection closed");
                // å°è¯•é‡æ–°è¿æ¥
                setTimeout(connect, 3000);
            };
            
            ws.onerror = function(error) {
                console.log("WebSocket error: " + error);
            };
        }
        
        function handleServerMessage(message) {
            // æ ¹æ®æƒ…ç»ªçŠ¶æ€æ˜¾ç¤ºä¸åŒçš„è¡¨æƒ…
            // å½“æ¥æ”¶åˆ° emotion_update ç±»å‹çš„æ¶ˆæ¯æ—¶ï¼Œæ›´æ–°è¡¨æƒ…æ˜¾ç¤º
            console.log("å¤„ç†æ¶ˆæ¯:", message);  // æ·»åŠ è°ƒè¯•æ—¥å¿—
            if (message.type === 'emotion_update') {
                const emotionElement = document.getElementById('emotion');
                // æ ¹æ®æƒ…ç»ªçŠ¶æ€æ˜¾ç¤ºä¸åŒçš„è¡¨æƒ…
                switch(message.data.emotion) {
                    case 'happy':
                        // é«˜å…´æ—¶æ˜¾ç¤ºç¬‘è„¸è¡¨æƒ…
                        emotionElement.textContent = 'ğŸ˜Š';
                        break;
                    case 'sad':
                        // ä¼¤å¿ƒæ—¶æ˜¾ç¤ºå“­è„¸è¡¨æƒ…
                        emotionElement.textContent = 'ğŸ˜¢';
                        break;
                    case 'angry':
                        // ç”Ÿæ°”æ—¶æ˜¾ç¤ºæ„¤æ€’è¡¨æƒ…
                        emotionElement.textContent = 'ğŸ˜ ';
                        break;
                    case 'surprised':
                        // æƒŠè®¶æ—¶æ˜¾ç¤ºæƒŠè®¶è¡¨æƒ…
                        emotionElement.textContent = 'ğŸ˜²';
                        break;
                    case 'neutral':
                        // ä¸­æ€§/é»˜è®¤çŠ¶æ€æ—¶æ˜¾ç¤ºé»˜è®¤è¡¨æƒ…
                        emotionElement.textContent = 'ğŸ˜';
                        break;
                    default:
                        // å…¶ä»–æœªå®šä¹‰çš„æƒ…ç»ªçŠ¶æ€æ˜¾ç¤ºé»˜è®¤è¡¨æƒ…
                        emotionElement.textContent = 'ğŸ˜';
                }
            }
        }
        
        // åˆå§‹åŒ–WebSocketè¿æ¥
        connect();
    </script>
</body>
</html>